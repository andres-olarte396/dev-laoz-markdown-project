<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plataforma Educativa Dev Laoz</title>
    <!-- LMS Original Styles -->
    <link rel="stylesheet" href="style.css" />

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>
    <!-- Mermaid -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="header-content">
          <h1>Plataforma Educativa</h1>
          <p class="subtitle">Aprende, Practica y Domina</p>
        </div>
        <div class="header-stats">
          <div class="stat">
            <span id="apiStatus" style="font-size: 1.2rem">checking...</span>
            <span class="stat-label" id="backendStatus">Conectando...</span>
          </div>
          <div class="stat">
            <span class="stat-value" id="totalCourses">0</span>
            <span class="stat-label">Cursos</span>
          </div>
          <div class="stat">
            <span class="stat-value" id="totalModules">0</span>
            <span class="stat-label">M√≥dulos</span>
          </div>
        </div>
      </header>

      <!-- Main Content (Sidebar + Content) -->
      <div class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
          <div class="sidebar-header">
            <h2>Mis Cursos</h2>
            <button
              class="btn-refresh"
              onclick="loadCourses()"
              title="Actualizar"
            >
              <ion-icon name="refresh-outline"></ion-icon>
            </button>
          </div>
          <div id="courseList" class="course-list">
            <!-- Course Items Injected Here -->
            <div class="loading">Cargando cursos...</div>
          </div>
        </aside>

        <!-- Content Area -->
        <main class="content">
          <!-- Welcome Screen -->
          <div id="welcomeScreen" class="welcome-screen">
            <div class="welcome-icon">üéì</div>
            <h2>Bienvenido a tu Espacio de Aprendizaje</h2>
            <p>Selecciona un curso del men√∫ lateral para comenzar.</p>

            <div class="features">
              <div class="feature">
                <span class="feature-icon">üìö</span>
                <h3>Contenido Estructurado</h3>
                <p>Accede a cursos organizados por m√≥dulos y temas.</p>
              </div>
              <div class="feature">
                <span class="feature-icon">üéß</span>
                <h3>Audio Integrado</h3>
                <p>Escucha las lecciones mientras estudias.</p>
              </div>
              <div class="feature">
                <span class="feature-icon">üìù</span>
                <h3>Evaluaciones</h3>
                <p>Pon a prueba tus conocimientos con quizzes interactivos.</p>
              </div>
            </div>
          </div>

          <!-- Course Detail View -->
          <div id="courseDetail" class="course-detail" style="display: none">
            <div class="course-header">
              <button class="btn-back" onclick="showWelcome()">‚Üê Volver</button>
              <div>
                <h2 id="courseTitle">T√≠tulo del Curso</h2>
                <p id="courseDescription" class="course-description">
                  Descripci√≥n del curso...
                </p>
              </div>
            </div>

            <div class="course-info">
              <div class="info-item">
                <span class="info-label">Nivel</span>
                <span id="courseLevel">Intermedio</span>
              </div>
              <div class="info-item">
                <span class="info-label">Duraci√≥n</span>
                <span id="courseDuration">10h</span>
              </div>
              <div class="info-item">
                <span class="info-label">M√≥dulos</span>
                <span id="courseModules">5</span>
              </div>
            </div>

            <div class="modules-container">
              <h3>Contenido del Curso</h3>
              <div id="modulesList" class="modules-list">
                <!-- Modules Injected Here -->
              </div>
            </div>
          </div>

          <!-- Topic View -->
          <div id="topicView" class="topic-view" style="display: none">
            <div class="topic-header-actions">
              <button
                class="btn-back-course"
                onclick="showCourseDetailFromTopic()"
              >
                ‚Üê Volver al Curso
              </button>
              <div style="display: flex; gap: 10px">
                <button id="btnAudio" class="btn-action" style="display: none">
                  <ion-icon name="headset-outline"></ion-icon> Escuchar
                </button>
                <button
                  id="btnEvaluation"
                  class="btn-action btn-eval"
                  onclick="startQuiz()"
                  style="display: none"
                >
                  <ion-icon name="create-outline"></ion-icon> Realizar Quiz
                </button>
              </div>
            </div>

            <div id="topicContentArea" class="markdown-body">
              <!-- Markdown Content Injected Here -->
            </div>
          </div>
        </main>
      </div>

      <!-- Footer -->
      <footer class="footer">Platforma Educativa Dev Laoz &copy; 2025</footer>
    </div>

    <!-- Audio Player (Persistent) -->
    <div
      id="audioPlayerContainer"
      class="audio-player-container"
      style="display: none"
    >
      <div class="audio-info">
        <ion-icon name="musical-note" class="audio-icon"></ion-icon>
        <div class="audio-text">
          <span id="audioTitle" class="audio-title">T√≠tulo del Audio</span>
          <span id="audioStatus" class="audio-status">Reproduciendo...</span>
        </div>
      </div>
      <div class="audio-controls-wrapper">
        <audio id="mainAudioPlayer" controls></audio>
      </div>
      <button class="btn-close-audio" onclick="hideAudioPlayer()">
        <ion-icon name="close-outline"></ion-icon>
      </button>
    </div>

    <!-- Quiz Modal -->
    <div id="quizModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Evaluaci√≥n</h2>
          <span class="close" onclick="closeQuiz()">&times;</span>
        </div>
        <div id="quizBody" class="modal-body">
          <!-- Questions Injected Here -->
        </div>
        <div class="modal-footer">
          <button class="btn-submit-quiz action-btn" onclick="submitQuiz()">
            Enviar Respuestas
          </button>
          <button
            onclick="closeQuiz()"
            style="
              background: transparent;
              border: 1px solid #666;
              color: var(--dark);
              padding: 8px 16px;
              border-radius: 4px;
              cursor: pointer;
              margin-left: 10px;
            "
          >
            Cerrar
          </button>
        </div>
      </div>
    </div>

    <!-- LMS Script -->
    <script src="app.js"></script>
  </body>
</html>
